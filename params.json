{"name":"Account-javascriptsdk","tagline":"Account SDK implement in JavaScript","body":"豌豆荚账号系统 JavaScript SDK\r\n=====================\r\n\r\n统一 Web 端（含 Windows 客户端和各种 Webview 中需要调用账号信息的场景）调用豌豆荚账号系统 API 的方式，封装内部细节。保证 SDK API 稳定、优雅、安全并且文件体积小巧。\r\n\r\n目前提供两种方案使用：\r\n\r\n1. 通过 Hook 在页面中嵌入豌豆荚账号页面，用户登录（或其它操作）成功后将返回用户信息。适合需要豌豆荚账号进行认证的产品；\r\n2. 通过 SDK 直接访问账号系统 API。适合针对豌豆荚账号系统进行深度定制的产品。\r\n\r\n依赖\r\n--------------------------------------\r\n\r\nHook 和 SDK 都依赖 [jQuery](https://github.com/jquery/jquery)（或 [Zepto](https://github.com/madrobby/zepto)）。由于跨文档通讯的需要，Hook 还依赖 [MessengerJS](https://github.com/biqing/MessengerJS)。\r\n\r\n其中，Zepto 需要通过定制额外支持 data / deferred / callbacks 模块。定制方法请参考[官方说明](https://github.com/madrobby/zepto)，或者直接使用我们编译好的定制版 `app/javascripts/zepto.js` 。\r\n\r\n如何使用\r\n--------------------------------------\r\n1. `git clone git@github.com:wandoulabs/Account-JavaScriptSDK.git` ；\r\n2. `npm install` ；\r\n3. `bower install` ；\r\n4. `grunt build` ；\r\n5. 在页面中引入 `dist/snappea-account-hook.js` 或 `dist/snappea-account-sdk.js` 。\r\n\r\n约定\r\n--------------------------------------\r\n\r\n所有异步函数（函数名以 `Async` 结尾）将返回 `$.Deferred` 对象。\r\n\r\nHook 用法\r\n--------------------------------------\r\n\r\n#### 检查用户登录状态\r\n\r\n```JavaScript\r\nSnapPea.AccountHook.checkAsync().then(function (resp) {\r\n    console.log('Hello, %s!', resp.data.nick); // 已登录\r\n}).fail(function () {\r\n    console.log('Who are you?'); // 未登录\r\n});\r\n```\r\n\r\n#### 在页面内嵌入豌豆荚账号页面\r\n\r\n```JavaScript\r\nSnapPea.AccountHook.openAsync(name).then(function (resp) {\r\n    if (resp.isLoggedIn) {\r\n        console.log('Welcome back, %s.', resp.data.nick); // 操作成功后处于登录状态\r\n    } else {\r\n        console.log('Bye.'); // 操作成功后处于未登录状态\r\n    }\r\n});\r\n```\r\n\r\n其中，`name` 可为：\r\n* login 登录\r\n* register 注册\r\n* find 找回密码\r\n* password 修改密码\r\n* logout 退出\r\n\r\n#### 跳转到豌豆荚账号页面\r\n\r\n```JavaScript\r\nSnapPea.AccountHook.redirect(name);\r\n```\r\n\r\nSDK 用法\r\n--------------------------------------\r\n\r\n### 登录\r\n\r\n```JavaScript\r\nSnapPea.Account.loginAsync({\r\n    username : 'username',\r\n    password : 'psw'\r\n});\r\n```\r\n\r\n### 注册\r\n\r\n```JavaScript\r\nSnapPea.Account.regAsync({\r\n    username : 'username',\r\n    password : 'psw'\r\n});\r\n```\r\n\r\n### 验证邮箱格式\r\n\r\n```JavaScript\r\nSnapPea.Account.isEmail(email);\r\n```\r\n\r\n### 验证手机号格式\r\n\r\n```JavaScript\r\nSnapPea.Account.isPhoneNumber(email);\r\n```\r\n\r\n### 检查用户名是否可用\r\n\r\n```JavaScript\r\nSnapPea.Account.checkUsernameAsync(username);\r\n```\r\n\r\n### 通过第三方账号登录\r\n```JavaScript\r\nSnapPea.Account.loginWithThirdParty({\r\n    platform : 'sina',\r\n    callback : 'http://www.wandoujia.com/'\r\n});\r\n```\r\n\r\n### 从本地获取用户登录状态\r\n\r\n```JavaScript\r\nSnapPea.Account.isLogined();\r\n```\r\n\r\n### 从本地获取用户信息\r\n\r\n```JavaScript\r\nSnapPea.Account.getUserInfo();\r\n```\r\n\r\n### 从服务端获取用户的登录状态和信息\r\n\r\n```JavaScript\r\nSnapPea.Account.checkUserLoginAsync();\r\n```\r\n\r\n### 通过用户名找回密码\r\n\r\n```JavaScript\r\nSnapPea.Account.findPwdAsync(username);\r\n```\r\n\r\n### 判断找回密码的激活码是否正确\r\n\r\n```JavaScript\r\nSnapPea.Account.checkCodeAsync({\r\n    username : 'username',\r\n    passcode : 'passcode'\r\n});\r\n```\r\n\r\n### 重置密码\r\n\r\n```JavaScript\r\nSnapPea.Account.resetPwdAsync({\r\n    username : 'username',\r\n    passcode : 'passcode',\r\n    password : 'password'\r\n});\r\n```\r\n\r\n### 修改密码\r\n\r\n```JavaScript\r\nSnapPea.Account.modifyPwdAsync({\r\n    password : 'password',\r\n    newpassword : 'newpassword'\r\n});\r\n```\r\n\r\n### 修改昵称\r\n\r\n```JavaScript\r\nSnapPea.Account.updateProfileAsync({\r\n    nickname : 'nickname'\r\n});\r\n```\r\n\r\n### 修改头像\r\n\r\n```JavaScript\r\nSnapPea.Account.uploadAvatarAsync({\r\n    file : e.currentTarget.files[0]\r\n});\r\n```\r\n\r\n### 判断一键注册修改密码的激活码是否正确\r\n\r\n```JavaScript\r\nSnapPea.Account.checkPasscodeAsync({\r\n    passcode : 'passcode'\r\n});\r\n```\r\n\r\n### 一键注册的修改密码\r\n\r\n```JavaScript\r\nSnapPea.Account.modifyPwdByCodeAsync({\r\n    passcode : 'passcode',\r\n    password : 'password'\r\n});\r\n```\r\n\r\n### 激活账号\r\n\r\n```JavaScript\r\nSnapPea.Account.activateAsync({\r\n    type : 'sms' // or email\r\n});\r\n```\r\n\r\n### 判断激活账号的激活码是否正确\r\n\r\n```JavaScript\r\nSnapPea.Account.activateValidAsync({\r\n    passcode : 'passcode',\r\n    password : 'password'\r\n});\r\n```\r\n\r\n### 解除第三方账号的绑定\r\n\r\n```JavaScript\r\nSnapPea.Account. unbindThirdPartyAsync({\r\n    platform : '1' // 1=sina / 2=qq / 3=renren\r\n});\r\n```\r\n\r\n### 退出\r\n\r\n```JavaScript\r\nSnapPea.Account.logoutAsync();\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}